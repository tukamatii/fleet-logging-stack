# fleet.yaml
defaultNamespace: loki

namespaceLabels:
  okbtsp.corp/department: OIT
  okbtsp.corp/owner: baranav
  okbtsp.corp/project: loki

name: loki

# Кастомизация под кластеры
targetCustomizations:
  # === AGGREGATOR ===
  - name: aggregator
    clusterSelector:
      matchLabels:
        okbtsp.corp/monitoring-aggregator: "true"
    kustomize:
      dir: "full"

  - name: namespace-only-placeholder
    clusterSelector:
      matchLabels:
        okbtsp.corp/department: OIT
    kustomize:
      dir: "base"

dependsOn:
  - selector:
      matchLabels:
        okbtsp.corp/project: external-secrets
